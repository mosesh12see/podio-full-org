<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Org Stats - Closer App</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            min-height: 100vh;
            padding: 40px;
            color: #fff;
            zoom: 0.65;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 4em;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.4em;
            opacity: 0.9;
        }

        .last-updated {
            text-align: center;
            opacity: 0.7;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 40px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 50px;
            border: 2px solid rgba(255, 255, 255, 0.15);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 70px rgba(240, 147, 251, 0.5);
        }

        .stat-card h2 {
            font-size: 2.5em;
            margin-bottom: 35px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            border-bottom: 3px solid rgba(240, 147, 251, 0.5);
            padding-bottom: 20px;
        }

        .big-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 35px;
        }

        .big-stat {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
        }

        .big-stat .label {
            font-size: 1em;
            opacity: 0.7;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }

        .big-stat .value {
            font-size: 3em;
            font-weight: bold;
            color: #4ade80;
        }

        .big-stat .value.money {
            color: #fbbf24;
        }

        .big-stat .value.revenue {
            color: #60a5fa;
        }

        .big-stat .value.spend {
            color: #f87171;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .metric-row:last-child {
            border-bottom: none;
        }

        .metric-row-label {
            font-size: 1.1em;
            opacity: 0.8;
        }

        .metric-row-value {
            font-size: 1.5em;
            font-weight: bold;
        }

        .footer {
            text-align: center;
            margin-top: 60px;
            opacity: 0.6;
            font-size: 1em;
        }

        .footer p {
            margin: 8px 0;
        }

        /* Auto-refresh indicator */
        .refresh-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9em;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè¢ FULL ORG STATS</h1>
            <p>Complete Closer App Performance Dashboard</p>
        </div>

        <div class="last-updated">
            Last Updated: October 25, 2025 at 01:18 PM
        </div>

        <div class="stats-grid">
            <!-- MTD Card -->
            <div class="stat-card">
                <h2>üìÜ MTD (Month to Date)</h2>

                <div class="big-stats">
                    <div class="big-stat">
                        <div class="label">Revenue</div>
                        <div class="value revenue">$1,471,360</div>
                    </div>
                    <div class="big-stat">
                        <div class="label">Spend</div>
                        <div class="value spend">$57,684</div>
                    </div>
                    <div class="big-stat">
                        <div class="label">Profit</div>
                        <div class="value money">$157,837</div>
                    </div>
                    <div class="big-stat">
                        <div class="label">Sit Rate</div>
                        <div class="value">53.9%</div>
                    </div>
                    <div class="big-stat">
                        <div class="label">Close Rate</div>
                        <div class="value">28.8%</div>
                    </div>
                    <div class="big-stat">
                        <div class="label">Total KW Sold</div>
                        <div class="value">267.52</div>
                    </div>
                </div>

                <div class="metric-row">
                    <span class="metric-row-label">Total Appointments</span>
                    <span class="metric-row-value">245</span>
                </div>
                <div class="metric-row">
                    <span class="metric-row-label">Sits</span>
                    <span class="metric-row-value">132</span>
                </div>
                <div class="metric-row">
                    <span class="metric-row-label">Closed Deals</span>
                    <span class="metric-row-value">38</span>
                </div>
            </div>

            <!-- WTD Card -->
            <div class="stat-card">
                <h2>üìÖ WTD (Week to Date)</h2>

                <div class="big-stats">
                    <div class="big-stat">
                        <div class="label">Revenue</div>
                        <div class="value revenue">$448,140</div>
                    </div>
                    <div class="big-stat">
                        <div class="label">Spend</div>
                        <div class="value spend">$10,488</div>
                    </div>
                    <div class="big-stat">
                        <div class="label">Profit</div>
                        <div class="value money">$48,073</div>
                    </div>
                    <div class="big-stat">
                        <div class="label">Sit Rate</div>
                        <div class="value">35.3%</div>
                    </div>
                    <div class="big-stat">
                        <div class="label">Close Rate</div>
                        <div class="value">37.5%</div>
                    </div>
                    <div class="big-stat">
                        <div class="label">Total KW Sold</div>
                        <div class="value">81.48</div>
                    </div>
                </div>

                <div class="metric-row">
                    <span class="metric-row-label">Total Appointments</span>
                    <span class="metric-row-value">68</span>
                </div>
                <div class="metric-row">
                    <span class="metric-row-label">Sits</span>
                    <span class="metric-row-value">24</span>
                </div>
                <div class="metric-row">
                    <span class="metric-row-label">Closed Deals</span>
                    <span class="metric-row-value">9</span>
                </div>
            </div>
        </div>

        <div class="footer">
            <p><strong>Full Organization Statistics</strong> | Podio Closer App</p>
            <p>MTD: 2025-10-01 to 2025-10-25 | WTD: 2025-10-20 to 2025-10-25</p>
            <p style="margin-top: 15px;">üí∞ Revenue: $5.50 per watt (KW √ó 1000 √ó $5.50)</p>
            <p>üí∏ Spend: $437 per sit (Sits √ó $437)</p>
            <p>üíµ Profit: $0.59 per watt (KW √ó 1000 √ó $0.59)</p>
            <p style="margin-top: 15px; opacity: 0.8;">Sit Rate = Sits √∑ Total Appointments | Close Rate = Closed √∑ Sits</p>
        </div>
    </div>

    <!-- Refresh Indicator -->
    <div class="refresh-indicator" id="refreshIndicator">Next refresh: Calculating...</div>

    <script>
        // ========== AUTO-REFRESH SCHEDULER ==========
        const REFRESH_TIMES = [
            { hour: 9, minute: 0 },   // 9:00 AM
            { hour: 12, minute: 0 },  // 12:00 PM
            { hour: 15, minute: 0 },  // 3:00 PM
            { hour: 18, minute: 0 },  // 6:00 PM
            { hour: 21, minute: 0 }   // 9:00 PM
        ];

        function getNextRefreshTime() {
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());

            let nextRefresh = null;

            // Check today's refresh times
            for (const time of REFRESH_TIMES) {
                const refreshTime = new Date(today);
                refreshTime.setHours(time.hour, time.minute, 0, 0);

                if (refreshTime > now) {
                    nextRefresh = refreshTime;
                    break;
                }
            }

            // If no refresh time today, use first time tomorrow
            if (!nextRefresh) {
                const tomorrow = new Date(today);
                tomorrow.setDate(tomorrow.getDate() + 1);
                tomorrow.setHours(REFRESH_TIMES[0].hour, REFRESH_TIMES[0].minute, 0, 0);
                nextRefresh = tomorrow;
            }

            return nextRefresh;
        }

        function formatTime(date) {
            return date.toLocaleTimeString('en-US', {
                hour: 'numeric',
                minute: '2-digit',
                hour12: true
            });
        }

        function formatTimeUntil(ms) {
            const hours = Math.floor(ms / (1000 * 60 * 60));
            const minutes = Math.floor((ms % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((ms % (1000 * 60)) / 1000);

            if (hours > 0) {
                return `${hours}h ${minutes}m`;
            } else if (minutes > 0) {
                return `${minutes}m ${seconds}s`;
            } else {
                return `${seconds}s`;
            }
        }

        function updateRefreshIndicator() {
            const now = new Date();
            const nextRefresh = getNextRefreshTime();
            const timeUntil = nextRefresh - now;

            const indicator = document.getElementById('refreshIndicator');
            indicator.innerHTML = `Next refresh: ${formatTime(nextRefresh)}<br>Time until: ${formatTimeUntil(timeUntil)}`;

            // If it's time to refresh (within 5 seconds)
            if (timeUntil <= 5000 && timeUntil > 0) {
                indicator.innerHTML = `Refreshing in ${Math.ceil(timeUntil / 1000)}s...`;
            }

            if (timeUntil <= 0) {
                indicator.innerHTML = 'Refreshing now...';
                setTimeout(() => {
                    window.location.reload();
                }, 1000);
            }
        }

        // Update indicator every second
        setInterval(updateRefreshIndicator, 1000);
        updateRefreshIndicator();
    </script>
</body>
</html>
